/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./dev_js/assets.js":
/*!**************************!*\
  !*** ./dev_js/assets.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MUSIC_PATH: () => (/* binding */ MUSIC_PATH),\n/* harmony export */   SOUNDS: () => (/* binding */ SOUNDS),\n/* harmony export */   SOUNDS_PATH: () => (/* binding */ SOUNDS_PATH),\n/* harmony export */   SPRITES: () => (/* binding */ SPRITES),\n/* harmony export */   SPRITES_PATH: () => (/* binding */ SPRITES_PATH)\n/* harmony export */ });\nconst SPRITES_PATH = './src/images/';\r\nconst SOUNDS_PATH = './src/sounds/';\r\nconst MUSIC_PATH = './src/MUSIC/';\r\n\r\nconst SPRITES = {\r\n    dice: 'dices_84x84px_mixed_frames.png',\r\n    board: 'board.svg',\r\n\r\n    tokenPointerGreen: 'token_pointer_green_160x160px.png',\r\n\r\n    pointerPlayerH: 'turn_bw_480x120px_32frames.png',\r\n    pointerPlayerV: 'turn_bw_120x480px_32frames.png',\r\n\r\n    dicePointer: 'dice_pointer_160x160px.png',\r\n\r\n    tokenGreen: 'token_green_128x128px.png',\r\n    tokenYellow: 'token_yellow_128x128px.png',\r\n    tokenBlue: 'token_blue_128x128px.png',\r\n    tokenRed: 'token_red_128x128px.png',\r\n    tokenColor: 'token_color_128x128px.png',\r\n    tokenPurple: 'token_purple_128x128px.png',\r\n    tokenBlack: 'token_black_128x128px.png',\r\n};\r\n\r\nconst SOUNDS = {\r\n    dice: 'se_dices.mp3',\r\n    dice2: 'se_dices2.mp3',\r\n    startToken: 'se_start_token.mp3',\r\n    step0: 'se_step_0.mp3',\r\n    step1: 'se_step_1.mp3',\r\n    step2: 'se_step_2.mp3',\r\n    step3: 'se_step_3.mp3',\r\n    step4: 'se_step_4.mp3',\r\n    step5: 'se_step_5.mp3',\r\n    step6: 'se_step_6.mp3',\r\n};\n\n//# sourceURL=webpack://webpack-template/./dev_js/assets.js?");

/***/ }),

/***/ "./dev_js/classes/Board.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Board.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n\r\n\r\n\r\n\r\nclass Board {\r\n    constructor() {\r\n        this.image = _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.board;\r\n        this.ceilSize = _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ceilSize;\r\n        this.imageSize = 13 * this.ceilSize;\r\n        this.imageOffset = _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ceilSize;\r\n\r\n        this.reserveTop = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, target: 6, x: 0, y: 0, rateX: 5.5, rateY: 0},\r\n            {isEmpty: true, target: 6, x: 0, y: 0, rateX: 6.5, rateY: 0},\r\n            {isEmpty: true, target: 6, x: 0, y: 0, rateX: 7.5, rateY: 0},\r\n            {isEmpty: true, target: 6, x: 0, y: 0, rateX: 8.5, rateY: 0},\r\n        ];\r\n        this.reserveRight = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, target: 18, x: 0, y: 0, rateX: 14, rateY: 5.5},\r\n            {isEmpty: true, target: 18, x: 0, y: 0, rateX: 14, rateY: 6.5},\r\n            {isEmpty: true, target: 18, x: 0, y: 0, rateX: 14, rateY: 7.5},\r\n            {isEmpty: true, target: 18, x: 0, y: 0, rateX: 14, rateY: 8.5},\r\n        ];\r\n        this.reserveBottom = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, target: 30, x: 0, y: 0, rateX: 5.5, rateY: 14},\r\n            {isEmpty: true, target: 30, x: 0, y: 0, rateX: 6.5, rateY: 14},\r\n            {isEmpty: true, target: 30, x: 0, y: 0, rateX: 7.5, rateY: 14},\r\n            {isEmpty: true, target: 30, x: 0, y: 0, rateX: 8.5, rateY: 14},\r\n        ];\r\n        this.reserveLeft = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, target: 42, x: 0, y: 0, rateX: 0, rateY: 5.5},\r\n            {isEmpty: true, target: 42, x: 0, y: 0, rateX: 0, rateY: 6.5},\r\n            {isEmpty: true, target: 42, x: 0, y: 0, rateX: 0, rateY: 7.5},\r\n            {isEmpty: true, target: 42, x: 0, y: 0, rateX: 0, rateY: 8.5},\r\n        ];\r\n        this.reserves = [this.reserveTop, this.reserveRight, this.reserveBottom, this.reserveLeft];\r\n\r\n        this.toiletTop = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 10, rateY: 2},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 11, rateY: 2},\r\n            {token: null, move: 6, target: 11, x: 0, y: 0, rateX: 12, rateY: 2},\r\n        ];\r\n        this.toiletRight = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 12, rateY: 10},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 12, rateY: 11},\r\n            {token: null, move: 6, target: 23, x: 0, y: 0, rateX: 12, rateY: 12},\r\n        ];\r\n        this.toiletBottom = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 4, rateY: 12},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 3, rateY: 12},\r\n            {token: null, move: 6, target: 35, x: 0, y: 0, rateX: 2, rateY: 12},\r\n        ];\r\n        this.toiletLeft = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 2, rateY: 4},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 2, rateY: 3},\r\n            {token: null, move: 6, target: 47, x: 0, y: 0, rateX: 2, rateY: 2},\r\n        ];\r\n        this.toilets = [this.toiletTop, this.toiletRight, this.toiletBottom, this.toiletLeft];\r\n\r\n        this.homeTop = [\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 2},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 3},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 4},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 5},\r\n        ];\r\n        this.homeRight = [\r\n            {isEmpty: true, x: 0, y: 0, rateX: 12, rateY: 7},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 11, rateY: 7},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 10, rateY: 7},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 9, rateY: 7},\r\n        ];\r\n        this.homeBottom = [\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 12},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 11},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 10},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 7, rateY: 9},\r\n        ];\r\n        this.homeLeft = [\r\n            {isEmpty: true, x: 0, y: 0, rateX: 2, rateY: 7},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 3, rateY: 7},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 4, rateY: 7},\r\n            {isEmpty: true, x: 0, y: 0, rateX: 5, rateY: 7},\r\n        ];\r\n        this.homes = [this.homeTop, this.homeRight, this.homeBottom, this.homeLeft];\r\n\r\n        this.ports = [\r\n            // граньСторона (topLeft - верхняя грань поля, слева)\r\n            {type: 'topLeft', target: 44, x: 0, y: 0, rateX: 5, rateY: 5},\r\n            {type: 'topRight', target: 16, x: 0, y: 0, rateX: 9, rateY: 5},\r\n            {type: 'rightTop', target: 8, x: 0, y: 0, rateX: 9, rateY: 5},\r\n            {type: 'rightBottom', target: 28, x: 0, y: 0, rateX: 9, rateY: 9},\r\n            {type: 'bottomRight', target: 20, x: 0, y: 0, rateX: 9, rateY: 9},\r\n            {type: 'bottomLeft', target: 40, x: 0, y: 0, rateX: 5, rateY: 9},\r\n            {type: 'leftBottom', target: 32, x: 0, y: 0, rateX: 5, rateY: 9},\r\n            {type: 'leftTop', target: 4, x: 0, y: 0, rateX: 5, rateY: 5},\r\n        ]\r\n\r\n        this.ceils = [\r\n            // top line\r\n            {type: 'corner', x: 0, y: 0, rateX: 1, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 2, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 3, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 4, rateY: 1},\r\n            {type: 'port', target: 0, x: 0, y: 0, rateX: 5, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 6, rateY: 1},\r\n            {type: 'home', target: 0, x: 0, y: 0, rateX: 7, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 8, rateY: 1},\r\n            {type: 'port', target: 1, x: 0, y: 0, rateX: 9, rateY: 1},\r\n            {type: 'toilet', target: 0, x: 0, y: 0, rateX: 10, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 11, rateY: 1},\r\n            {type: 'exit', x: 0, y: 0, rateX: 12, rateY: 1},\r\n            // right line\r\n            {type: 'corner', x: 0, y: 0, rateX: 13, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 2},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 3},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 4},\r\n            {type: 'port', target: 2, x: 0, y: 0, rateX: 13, rateY: 5},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 6},\r\n            {type: 'home', target: 1, x: 0, y: 0, rateX: 13, rateY: 7},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 8},\r\n            {type: 'port', target: 3, x: 0, y: 0, rateX: 13, rateY: 9},\r\n            {type: 'toilet', target: 1, x: 0, y: 0, rateX: 13, rateY: 10},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 11},\r\n            {type: 'exit', x: 0, y: 0, rateX: 13, rateY: 12},\r\n            // bottom line\r\n            {type: 'corner', x: 0, y: 0, rateX: 13, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 12, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 11, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 10, rateY: 13},\r\n            {type: 'port', target: 4, x: 0, y: 0, rateX: 9, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 8, rateY: 13},\r\n            {type: 'home', target: 2, x: 0, y: 0, rateX: 7, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 6, rateY: 13},\r\n            {type: 'port', target: 5, x: 0, y: 0, rateX: 5, rateY: 13},\r\n            {type: 'toilet', target: 2, x: 0, y: 0, rateX: 4, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 3, rateY: 13},\r\n            {type: 'exit', x: 0, y: 0, rateX: 2, rateY: 13},\r\n            // left line\r\n            {type: 'corner', x: 0, y: 0, rateX: 1, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 12},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 11},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 10},\r\n            {type: 'port', target: 6, x: 0, y: 0, rateX: 1, rateY: 9},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 8},\r\n            {type: 'home', target: 3, x: 0, y: 0, rateX: 1, rateY: 7},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 6},\r\n            {type: 'port', target: 7, x: 0, y: 0, rateX: 1, rateY: 5},\r\n            {type: 'toilet', target: 3, x: 0, y: 0, rateX: 1, rateY: 4},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 3},\r\n            {type: 'exit', x: 0, y: 0, rateX: 1, rateY: 2},\r\n        ];\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        const offset = this.ceilSize * 0.5 + _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boardOffset;\r\n        [ ...this.reserves, ...this.toilets, ...this.homes, this.ports, this.ceils]\r\n        .forEach( container => {\r\n            container.forEach(ceil => {\r\n                ceil.x = offset + this.ceilSize * ceil.rateX;\r\n                ceil.y = offset + this.ceilSize * ceil.rateY;\r\n            });\r\n        });\r\n    }\r\n\r\n    addToReserve(startPoint) {\r\n        const reserve = this.reserves[startPoint];\r\n        for (let i = 0; i < 4; i++) {\r\n            if (reserve[i].isEmpty) {\r\n                reserve[i].isEmpty = false;\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n\r\n    removeFromReserve(startPoint, index) {\r\n        const reserve = this.reserves[startPoint];\r\n        reserve[index].isEmpty = true;\r\n    }\r\n\r\n    update() {\r\n        _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].context.drawImage(this.image, this.imageOffset, this.imageOffset, this.imageSize, this.imageSize);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Board);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Board.js?");

/***/ }),

/***/ "./dev_js/classes/Dice.js":
/*!********************************!*\
  !*** ./dev_js/classes/Dice.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _DicePointer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DicePointer */ \"./dev_js/classes/DicePointer.js\");\n\r\n\r\n\r\n\r\n\r\nclass Dice {\r\n    constructor(x, y) {\r\n        this.img = _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.dice;\r\n        this.x = x - 42;\r\n        this.y = y - 42;\r\n        this.frameSize = 84;\r\n\r\n        this.throwDuration = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceThrowDuration;\r\n        this.fps = 30;\r\n        this.frameDuration = Math.floor(1000 / this.fps);\r\n        this.frameTimeout = this.frameDuration;\r\n        this.framePathSize = Math.floor(this.throwDuration / this.frameDuration);\r\n        this.framePath = [];\r\n        this.framePoint = {x: 0, y: 0};\r\n        this.value = this.getNewValue();\r\n\r\n        this.pointer = new _DicePointer__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this);\r\n        this.isActive = false;\r\n    }\r\n\r\n    getNewValue() {\r\n        const value = Math.ceil(Math.random() * 6);\r\n        //const value = Math.random() < 0.5 ? 6 : 3;\r\n        switch(value) {\r\n            case 1: \r\n                this.framePoint.x = 0;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 2:\r\n                this.framePoint.x = 4 * this.frameSize;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 5:\r\n                this.framePoint.x = 12 * this.frameSize;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 6:\r\n                this.framePoint.x = 8 * this.frameSize;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 3:\r\n                this.framePoint.x = Math.floor(Math.random() * 4) * 4 * this.frameSize;\r\n                this.framePoint.y = 0;\r\n                break;\r\n            case 4:\r\n                this.framePoint.x = Math.floor(Math.random() * 4) * 4 * this.frameSize;\r\n                this.framePoint.y = 8 * this.frameSize;\r\n                break;\r\n            default: console.warn('error in dice value');\r\n        }\r\n        return value;\r\n    }\r\n\r\n    throw() {\r\n        // \r\n        if(this.framePath.length) return 0;\r\n\r\n        let turnsOnPath = '';\r\n        while (turnsOnPath.length < this.framePathSize) {\r\n            turnsOnPath += ('' + Math.random()).slice(2);\r\n        }\r\n\r\n        this.value = this.getNewValue();\r\n        this.framePath.push(this.framePoint);\r\n\r\n        let direction = Math.floor(Math.random() * 8);\r\n        let {x, y} = this.framePoint;\r\n        const maxXY = 15 * this.frameSize;\r\n\r\n        for (let i = 0; i < this.framePathSize; i++) {\r\n            if (direction !== 0 && direction !== 4) {\r\n                x += (direction < 4) ? this.frameSize : -this.frameSize;\r\n                if (x < 0) x = maxXY;\r\n                if (x > maxXY) x = 0;\r\n            }\r\n            if (direction !== 2 && direction !== 6) {\r\n                y += (direction > 2 && direction < 6) ? this.frameSize : -this.frameSize;\r\n                if (y < 0) y = maxXY;\r\n                if (y > maxXY) y = 0;\r\n            }\r\n\r\n            this.framePath.push( {x, y} );\r\n\r\n            if (+turnsOnPath[i] < 2) {\r\n                direction--;\r\n                if (direction < 0) direction = 7;\r\n            }\r\n            if (+turnsOnPath[i] > 7) {\r\n                direction++;\r\n                if (direction > 7) direction = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.isActive) this.pointer.update(dt);\r\n\r\n        if (this.framePath.length) {\r\n            this.frameTimeout -= dt;\r\n            if (this.frameTimeout <= 0) {\r\n                this.frameTimeout += this.frameDuration;\r\n                this.framePoint = this.framePath.pop();\r\n            }\r\n        }\r\n        _render__WEBPACK_IMPORTED_MODULE_2__[\"default\"].context.drawImage(this.img,\r\n            this.framePoint.x, this.framePoint.y, this.frameSize, this.frameSize,\r\n            this.x, this.y, this.frameSize, this.frameSize);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dice);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Dice.js?");

/***/ }),

/***/ "./dev_js/classes/DicePointer.js":
/*!***************************************!*\
  !*** ./dev_js/classes/DicePointer.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\n\r\n\r\nclass DicePointer {\r\n    constructor(dice) {\r\n        this.image = _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.dicePointer;\r\n        this.x = dice.x + 41;\r\n        this.y = dice.y + 41;\r\n        this.scaleDuration = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceActiveDuration / 2;\r\n        this.maxSize = 160;\r\n        this.minSize = 80;\r\n        this.scaleRate = (this.maxSize - this.minSize) / this.scaleDuration;\r\n        this.isScaleUp = true;\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n    }\r\n\r\n    setMinSize() {\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.isScaleUp) {\r\n            this.size += this.scaleRate * dt;\r\n            if (this.size >= this.maxSize) this.isScaleUp = false;\r\n        } else  {\r\n            this.size -= this.scaleRate * dt;\r\n            if (this.size <= this.minSize) this.isScaleUp = true;\r\n        }\r\n        this.halfSize = this.size / 2;\r\n\r\n        _render__WEBPACK_IMPORTED_MODULE_2__[\"default\"].context.drawImage(this.image, this.x-this.halfSize, this.y-this.halfSize, this.size, this.size);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DicePointer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/DicePointer.js?");

/***/ }),

/***/ "./dev_js/classes/Layer.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Layer.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\nlet layerCount = 0;\r\n\r\nclass Layer {\r\n    constructor(name = '', zIndex = _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.length, objects = []) {\r\n        this.name = name || 'layer' + layerCount++;\r\n        this.zIndex = zIndex;\r\n        this.objects = objects;\r\n\r\n        if (zIndex === _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.length) _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.push(this);\r\n        else {\r\n            _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.splice(zIndex, 0, this);\r\n            _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.forEach( (layer, index) => layer.zIndex = index );\r\n        }\r\n    }\r\n\r\n    update(deltaTime) {\r\n        this.objects.forEach( object => object.update(deltaTime) );\r\n    }\r\n\r\n    remove(object) {\r\n        this.objects = this.objects.filter(obj => obj !== object);\r\n    }\r\n\r\n    add(object) {\r\n        this.objects.push(object);\r\n    }\r\n\r\n    moveUp(object) {\r\n        this.objects = this.objects.filter(obj => obj !== object);\r\n        this.objects.push(object);\r\n    }\r\n\r\n    clear() {\r\n        this.objects = [];\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Layer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Layer.js?");

/***/ }),

/***/ "./dev_js/classes/Player.js":
/*!**********************************!*\
  !*** ./dev_js/classes/Player.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../main */ \"./dev_js/main.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Timer */ \"./dev_js/classes/Timer.js\");\n/* harmony import */ var _Token__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Token */ \"./dev_js/classes/Token.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Player {\r\n    constructor(tokenImage, startPoint) {\r\n        this.getPointerPosition(startPoint);\r\n        this.image = (startPoint % 2 === 0) ? _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerH : _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerV;\r\n        this.frameWidth = (startPoint % 2 === 0) ? 480 : 120;\r\n        this.frameHeight = (startPoint % 2 === 0) ? 120 : 480;\r\n        this.frame = 0;\r\n        this.fps = 20;\r\n        this.frameDuration = Math.floor(1000 / this.fps);\r\n        this.frameTimeout = this.frameDuration;\r\n        this.frames = this.getFrames();\r\n\r\n        this.dices = [];\r\n        this.dice = null;\r\n        this.isGetDouble = false;\r\n        this.startPoint = startPoint;\r\n        this.tokens = this.generateTokens(tokenImage);\r\n\r\n        this.layer = _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLayer('players');\r\n    }\r\n\r\n    getPointerPosition(startPoint) {\r\n        if (startPoint % 2 === 0) {\r\n            this.x = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 5.5;\r\n            if (startPoint === 0) this.y = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset;\r\n            else this.y = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 14;\r\n        } else {\r\n            this.y = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 5.5;\r\n            if (startPoint === 3) this.x = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset;\r\n            else this.x = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 14;\r\n        }\r\n    }\r\n\r\n    getFrames() {\r\n        const frames = [];\r\n        for(let y = 0; y < this.image.height; y += this.frameHeight) {\r\n            for(let x = 0; x < this.image.width; x += this.frameWidth) {\r\n                frames.push({x, y});\r\n            }\r\n        }\r\n        return frames;\r\n    }\r\n\r\n    generateTokens(tokenImage) {\r\n        const tokensLayer = _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLayer('tokens');\r\n        const tokens = [];\r\n        for(let i = 0; i < 4; i++) {\r\n            const token = new _Token__WEBPACK_IMPORTED_MODULE_5__[\"default\"](tokenImage, this.startPoint, this);\r\n            tokens.push(token);\r\n            tokensLayer.add(token);\r\n        }\r\n        return tokens;\r\n    }\r\n\r\n    startTurn() {\r\n        this.layer.add(this);\r\n        this.throwDices();\r\n    }\r\n\r\n    throwDices() {\r\n        _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.dice2.play();\r\n        _main__WEBPACK_IMPORTED_MODULE_2__.game.dices.forEach(dice => dice.throw());\r\n        this.isGetDouble = _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[0].value === _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[1].value;\r\n        if (_main__WEBPACK_IMPORTED_MODULE_2__.game.dices[0].value >= _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[1].value) this.dices = [1, 0];\r\n        else this.dices = [0, 1];\r\n\r\n        //setTimeout();\r\n        new _Timer__WEBPACK_IMPORTED_MODULE_4__[\"default\"](() => this.useDice(), _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceThrowDuration);\r\n    }\r\n\r\n    useDice() {\r\n        this.dice = _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[ this.dices.pop() ];\r\n        this.dice.isActive = true;\r\n\r\n        const availableTokens = [];\r\n        /*\r\n        1) проверить каждый токен, способен ди он использовать данный дайс\r\n          - если да - пометить токен зеленым маркером\r\n        */\r\n        this.tokens.forEach(token => {\r\n            const isAvailable = token.checkUse(this.dice.value);\r\n            if (isAvailable) availableTokens.push(token);\r\n        });\r\n\r\n        if (availableTokens.length !== 0) {/*console.log('available tokens:', availableTokens);*/}\r\n        else new _Timer__WEBPACK_IMPORTED_MODULE_4__[\"default\"](() => this.diceFinished(), _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceActiveDuration);\r\n    }\r\n\r\n    diceFinished() {\r\n        this.dice.isActive = false;\r\n        this.dice.pointer.setMinSize();\r\n        if (this.dices.length) this.useDice();\r\n        else if (this.isGetDouble) this.throwDices();\r\n        else this.endTurn();\r\n    }\r\n\r\n    endTurn() { /*console.log('end turn');*/\r\n        this.layer.remove(this);\r\n        _main__WEBPACK_IMPORTED_MODULE_2__.game.nextTurn();\r\n    }\r\n\r\n    update(dt) {\r\n        this.frameTimeout -= dt;\r\n        if (this.frameTimeout <= 0) {\r\n            this.frameTimeout += this.frameDuration;\r\n            this.frame++;\r\n            if (this.frame === this.frames.length) this.frame = 0;\r\n        }\r\n        _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].context.drawImage(\r\n            this.image,\r\n            this.frames[this.frame].x, this.frames[this.frame].y, this.frameWidth, this.frameHeight,\r\n            this.x, this.y, this.frameWidth, this.frameHeight\r\n        );\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Player);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Player.js?");

/***/ }),

/***/ "./dev_js/classes/Pointer.js":
/*!***********************************!*\
  !*** ./dev_js/classes/Pointer.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\nclass Pointer {\r\n    constructor (index) {\r\n        this.scaleDuration = 900;\r\n        this.maxSize = 144; //132\r\n        this.minSize = 120; //102\r\n        this.size = this.minSize + ((this.maxSize - this.minSize) / 4) * index;\r\n        this.halfSize = this.size / 2;\r\n        \r\n        this.scaleRate = (this.maxSize - this.minSize) / this.scaleDuration;\r\n        this.direction = 0;\r\n        this.isScaleUp = true;\r\n    }\r\n\r\n    draw(sprite, point, dt) {\r\n        if (this.isScaleUp) {\r\n            this.size += this.scaleRate * dt;\r\n            if (this.size >= this.maxSize) this.isScaleUp = false;\r\n        } else  {\r\n            this.size -= this.scaleRate * dt;\r\n            if (this.size <= this.minSize) this.isScaleUp = true;\r\n        }\r\n        this.halfSize = this.size / 2;\r\n\r\n        _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].context.drawImage(sprite, point.x-this.halfSize, point.y-this.halfSize, this.size, this.size);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pointer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Pointer.js?");

/***/ }),

/***/ "./dev_js/classes/Timer.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Timer.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\nclass Timer {\r\n    constructor(callback, milliseconds) {\r\n        this.callback = callback;\r\n        this.milliseconds = milliseconds;\r\n        _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers[0].add(this);\r\n    }\r\n\r\n    update(dt) {\r\n        this.milliseconds -= dt;\r\n        if (this.milliseconds <= 0) {\r\n            setTimeout(() => this.callback(), 0);\r\n            _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers[0].remove(this);\r\n        }\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Timer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Timer.js?");

/***/ }),

/***/ "./dev_js/classes/Token.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Token.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main */ \"./dev_js/main.js\");\n/* harmony import */ var _Pointer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Pointer */ \"./dev_js/classes/Pointer.js\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Timer */ \"./dev_js/classes/Timer.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction playStepSound() {\r\n    _assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS['step' + Math.floor(Math.random() * 7)].play();\r\n}\r\n\r\nclass Token {\r\n    constructor(image, startPoint, player) {\r\n        this.player = player;\r\n        this.image = image;\r\n        this.maxSize = 128;\r\n        this.minSize = 96;\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n\r\n        this.startPoint = startPoint;\r\n        this.reserve = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.reserves[startPoint];\r\n        this.home = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.homes[startPoint];\r\n        this.container = this.reserve;\r\n        this.index = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.addToReserve(startPoint);\r\n\r\n        this.x = this.container[this.index].x;\r\n        this.y = this.container[this.index].y;\r\n\r\n        this.stepDuration = _constants__WEBPACK_IMPORTED_MODULE_5__[\"default\"].tokenStepDuration;\r\n        this.halfStepDuration = this.stepDuration / 2;\r\n        this.sizeRate = (this.maxSize - this.minSize) / this.halfStepDuration;\r\n        this.stepTimeout = this.stepDuration;\r\n        this.speed = 0;\r\n        this.steps = 0;\r\n        this.direction = 0;\r\n        this.target = null; // {container: null, index: 0, x: 0, y: 0}\r\n\r\n        this.isGoHome = false;\r\n        this.isOtherTokenAction = false;\r\n        this.isFromPort = false;\r\n\r\n        this.pointer = new _Pointer__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.index);\r\n        this.isAvailable = false;\r\n    }\r\n\r\n    // проверка пути (если путь доступен - фишка активируется)\r\n    checkUse(value) {\r\n        // выходим если не прошли проверку\r\n        switch(this.container) {\r\n            // в резерве\r\n            case this.reserve :\r\n                if (value !== 6) return false;\r\n                const otherToken = this.checkCeil(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, this.reserve[0].target);\r\n                if (otherToken.startPoint === this.startPoint) return false;\r\n                break;\r\n            // дома\r\n            case this.home :\r\n                if (this.index === 3) return false;\r\n\r\n                const steps = 3 - this.index;\r\n                if (value > steps) return false;\r\n                for(let i = this.index; i < this.index + steps; i++) {\r\n                    if (!this.home[i + 1].isEmpty) return false;\r\n                }\r\n                break;\r\n            // туалет\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletTop :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletRight :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletBottom :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletLeft :\r\n                const exitIndex = this.container[2].target;\r\n                let exitToken = null;\r\n                _main__WEBPACK_IMPORTED_MODULE_1__.game.players.forEach( player => {\r\n                    player.tokens.forEach( token => {\r\n                        if (token.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils\r\n                        && token.index === exitIndex) exitToken = token;\r\n                    });\r\n                });\r\n                const lastToken = this.container[2].token\r\n                const secondToken = this.container[1].token\r\n                \r\n                if (this.index === 0) {\r\n                    if (value !== 1) return false; // запрет активации\r\n\r\n                    // проверяем не перекрыт ли выход\r\n                    if (secondToken && lastToken && exitToken) {\r\n                        if (lastToken.startPoint === exitToken.startPoint) return false;\r\n                    }\r\n                }\r\n                if (this.index === 1) {\r\n                    if (value !== 3) return false;\r\n\r\n                    // проверяем не перекрыт ли выход\r\n                    if (lastToken && exitToken) {\r\n                        if (lastToken.startPoint === exitToken.startPoint) return false;\r\n                    }\r\n                }\r\n                if (this.index === 2) {\r\n                    if (value !== 6) return false;\r\n\r\n                    // проверяем не перекрыт ли выход своими фишками\r\n                    if (exitToken && exitToken.startPoint === this.startPoint) return false;\r\n                }\r\n                break;\r\n            // поле\r\n            default :\r\n                // проверка пути по основному игровому полю\r\n                let index = this.index;\r\n                let isInHome = index === this.reserve[0].target; // false;\r\n                for(let step = value; step > 0; step--) {\r\n                    index = ++index % _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils.length;\r\n\r\n                    // !!! Только после подхода к дому !!!\r\n                    if (isInHome) { console.log('ПРОВЕРКА ВХОДА ДОМОЙ step =', step, this.home);\r\n                        if (step > 4) return false;\r\n                        for (let i = 0; i < step; i++) {\r\n                            if (this.home[i].isEmpty === false) return false;\r\n                        }\r\n                        this.isAvailable = true;\r\n                        return true;\r\n                    }\r\n\r\n                    if(this.isGoHome) {\r\n                        console.log('Проверить не пора ли заходить домой...');\r\n                        if (index === this.reserve[0].target) {\r\n                            isInHome = true;\r\n                            console.log('Я ПОДОШОЛ К ДОМУ');\r\n                        }\r\n                    }\r\n\r\n                    // если это не последний шаг\r\n                    if (step > 1) {\r\n                        //проверяем все токены по пути\r\n                        if (this.checkCeil(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index)) return false;\r\n\r\n                    } else {\r\n                    // если это последний шаг\r\n\r\n                        // нельзя есть своих\r\n                        const otherToken = this.checkCeil(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index);\r\n                        if (otherToken && otherToken.startPoint === this.startPoint) return false;\r\n\r\n                        // проверяем, если это угол, то он должен быть свободен\r\n                        if (_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].type === 'corner' && otherToken ) return false;\r\n\r\n                        // проверяем, если это порт, то на его точке портирования не должно быть своих\r\n                        if (_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].type === 'port') {\r\n                            const portIndex = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].target;\r\n                            const portTargetCeilIndex = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports[portIndex].target;\r\n                            const otherTokenPort = this.checkCeil(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, portTargetCeilIndex);\r\n                            console.log('проверяем фишку с другого конца порта ->', otherTokenPort);\r\n                            if (otherTokenPort && otherToken.startPoint === this.startPoint) return false;\r\n                        }\r\n\r\n                        // проверяем, если это туалет - он не должен быть заблокирован при сдвиге фишек\r\n                        if (_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].type === 'toilet') {\r\n                            const toiletIndex = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].target;\r\n                            const toilet = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toilets[toiletIndex];\r\n\r\n                            const exitIndex = toilet[2].target;\r\n                            let exitToken = null;\r\n                            _main__WEBPACK_IMPORTED_MODULE_1__.game.players.forEach( player => {\r\n                                player.tokens.forEach( token => {\r\n                                    if (token.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils\r\n                                    && token.index === exitIndex) exitToken = token;\r\n                                });\r\n                            });\r\n                            const lastToken = toilet[2].token;\r\n                            const secondToken = toilet[1].token;\r\n                            const firstToken = toilet[0].token;\r\n                            if (firstToken && secondToken && lastToken && exitToken) {\r\n                                if (lastToken.startPoint === exitToken.startPoint) return false;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            // проверки пройдены\r\n        }\r\n        // фишка может быть использована\r\n        this.isAvailable = true;\r\n        return true;\r\n    }\r\n\r\n    // проверка ячейки (вернет фишку - если она там есть, или false - если ячейка свободна)\r\n    checkCeil(container, index) {\r\n        for (let p = 0; p < _main__WEBPACK_IMPORTED_MODULE_1__.game.players.length; p++) {\r\n            for (let t = 0; t < 4; t++) {\r\n                const otherToken = _main__WEBPACK_IMPORTED_MODULE_1__.game.players[p].tokens[t];\r\n                if (otherToken.container === container && otherToken.index === index && otherToken !== this) {\r\n                    return otherToken;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // активация фишки - она была доступна для перемещения и игрок по ней кликнул\r\n    activation() {\r\n        if (!this.isAvailable) return;\r\n\r\n        // это наш ход, а не активация чужой фишкой\r\n        this.isOtherTokenAction = false;\r\n\r\n        // деактивируем все токены\r\n        this.player.tokens.forEach(token => token.isAvailable = false);\r\n\r\n        // определяем шаги\r\n        this.steps = this.player.dice.value;\r\n\r\n        // выносим на верхний уровень слоя\r\n        this.player.layer.moveUp(this);\r\n        \r\n        this.startStep();\r\n    }\r\n\r\n    // начало перемещения\r\n    startStep() {\r\n        // определяем где мы\r\n        switch(this.container) {\r\n            // в резерве\r\n            case this.reserve : this.moveFromReserve(); break;\r\n            // дома\r\n            case this.home : this.moveInHome(); break;\r\n            // туалет\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletTop :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletRight :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletBottom :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletLeft : this.moveInToilet(); break;\r\n            // порт - (уже начали перемещаться по порту)\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports : this.moveInPort(); break;\r\n            // поле\r\n            default : this.moveOnMain();\r\n        }\r\n    }\r\n\r\n    // выводим фишку из резерва на стартовую клетку\r\n    moveFromReserve() {\r\n        this.steps = 1;\r\n        this.reserve[this.index].isEmpty = true;\r\n        this.target = {\r\n            container: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils,\r\n            index: this.reserve[0].target,\r\n            x: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[this.reserve[0].target].x,\r\n            y: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[this.reserve[0].target].y,\r\n        };\r\n        this.setDirection();\r\n        const distance = this.getDistance();\r\n        this.speed = distance / this.stepDuration;\r\n\r\n        _assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.startToken.play();\r\n    }\r\n\r\n    // перемещения по дому\r\n    moveInHome() { \r\n        this.target = {\r\n            container: this.home,\r\n            index: this.index + 1,\r\n            x: this.home[this.index + 1].x,\r\n            y: this.home[this.index + 1].y,\r\n        };\r\n\r\n        this.home[this.index].isEmpty = true;\r\n        this.home[this.index + 1].isEmpty = false;\r\n\r\n        this.setDirection();\r\n        const distance = this.getDistance();\r\n        this.speed = distance / this.stepDuration;\r\n    }\r\n\r\n    // перемещения по порту (вызывается при входе на клетку с портом или при движении в порту)\r\n    moveInPort() { \r\n        // (сейчас target = null)\r\n\r\n        // если уже в порту - выходим из него\r\n        if (this.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports) {\r\n            this.steps = 1;\r\n            const targetIndex = this.container[this.index].target;\r\n            this.target = {\r\n                container: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils,\r\n                index: targetIndex,\r\n                x: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[targetIndex].x,\r\n                y: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[targetIndex].y,\r\n            };\r\n            const otherToken = this.target.container[this.target.index.token];\r\n            if (otherToken) {\r\n                otherToken.isOtherTokenAction = true;\r\n                otherToken.moveInToilet();\r\n            }\r\n        } else {\r\n        // если только попали в порт\r\n            this.steps = 2;\r\n            const targetIndex = this.container[this.index].target;\r\n            this.target = {\r\n                container: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports,\r\n                index: targetIndex,\r\n                x: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports[targetIndex].x,\r\n                y: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports[targetIndex].y,\r\n            };\r\n        }\r\n        \r\n        this.setDirection();\r\n        const distance = this.getDistance();\r\n        this.speed = distance / this.stepDuration;\r\n\r\n        // SOUNDS.startToken.play();\r\n    }\r\n\r\n    // движение по туалету\r\n    moveInToilet() { console.log('MOVE IN TOILET', {...this});\r\n        this.steps = 1;\r\n        // движение внутри туалета\r\n        if (this.index < 2) {\r\n            this.target = {\r\n                container: this.container,\r\n                index: this.index + 1,\r\n                x: this.container[this.index + 1].x,\r\n                y: this.container[this.index + 1].y,\r\n            };\r\n            const otherToken = this.target.container[this.target.index].token;\r\n            if (otherToken) {\r\n                otherToken.isOtherTokenAction = true;\r\n                otherToken.moveInToilet();\r\n            }\r\n            // перезаписываем обитателя текущей ячейки туалета\r\n            this.container[this.target.index].token = this;\r\n            // очищаем информацию в предыдущей ячейки туалета\r\n            this.container[this.index].token = null;\r\n        } else {\r\n        // выход из туалета\r\n            const targetIndex = this.container[this.index].target\r\n            this.target = {\r\n                container: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils,\r\n                index: targetIndex,\r\n                x: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[targetIndex].x,\r\n                y: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[targetIndex].y,\r\n            };\r\n            // очищаем информацию в предыдущей ячейки туалета\r\n            this.container[this.index].token = null;\r\n        }\r\n        \r\n        this.setDirection();\r\n        const distance = this.getDistance();\r\n        this.speed = distance / this.stepDuration;\r\n\r\n        // SOUNDS.startToken.play();\r\n    }\r\n\r\n    // движение по основному полю\r\n    moveOnMain() {\r\n        // проверка не подошли ли ко входу домой\r\n        if(this.index === this.reserve[0].target && this.isGoHome) {\r\n            console.log('Пора заходить домой!');\r\n            this.target = {\r\n                container: this.home,\r\n                index: 0,\r\n                x: this.home[0].x,\r\n                y: this.home[0].y,\r\n            };\r\n        } else {\r\n            let targetIndex = (this.index + 1) % _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils.length;\r\n\r\n            this.target = {\r\n                container: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils,\r\n                index: targetIndex,\r\n                x: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[targetIndex].x,\r\n                y: _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[targetIndex].y,\r\n            };\r\n        }\r\n\r\n        this.setDirection();\r\n        const distance = this.getDistance();\r\n        this.speed = distance / this.stepDuration;\r\n\r\n        // SOUNDS.startToken.play();\r\n    }\r\n\r\n    // перемещение (вызывается из update(dt))\r\n    move(pathSize) {\r\n        this.x += Math.cos(this.direction) * pathSize;\r\n        this.y += Math.sin(this.direction) * pathSize;\r\n    }\r\n\r\n    // завершение текущего шага\r\n    stepEnd() {let t = false; if (this.target.container.length === 3) t = true;\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n        this.stepTimeout = this.stepDuration;\r\n        this.container = this.target.container;\r\n        this.index = this.target.index;\r\n        this.x = this.target.x;\r\n        this.y = this.target.y;\r\n\r\n        this.target = null;\r\n        playStepSound();\r\n\r\n        if (t) console.log('ЗАВЕРШЕНИЕ ХОДА ПОСЛЕ ВХОДА В ТУАЛЕТ', {...this});\r\n\r\n        if (--this.steps > 0) this.startStep();\r\n        else this.moveEnd();\r\n    }\r\n\r\n    // завершение перемещения (this.steps = 0)\r\n    moveEnd() {\r\n        // если был активирован другой фишкой - выходим со стартовыми свойствами\r\n        // что бы не дублировать передачу хода\r\n        if (this.isOtherTokenAction) {\r\n            if (this.container === this.reserve) {\r\n                this.isGoHome = false;\r\n                this.isOtherTokenAction = false;\r\n                this.isFromPort = false;\r\n            }\r\n            return;\r\n        }\r\n\r\n        // проверка - нужно ли начать отслеживать приближение к дому\r\n        if (!this.isGoHome) {\r\n            // если мы ушли со стартовой клетки - активируем проверки на вход домой\r\n            if (this.container !== _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils || this.index !== this.reserve[0].target) {\r\n                this.isGoHome = true;\r\n                console.log('this.isGoHome', this.isGoHome);\r\n            }\r\n        }\r\n\r\n        // если дома - проверяем все ли фишки пришли\r\n        if (this.container === this.home) {\r\n            let allAtHome = true\r\n            this.home.forEach( ceil => {\r\n                if (ceil.isEmpty) allAtHome = false;\r\n            });\r\n\r\n            if (allAtHome) {\r\n                console.log('PLAYER', this.startPoint, 'WIN');\r\n                return;\r\n            }\r\n        }\r\n\r\n        // если на основном поле\r\n        if (this.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils) {\r\n            // проверяем не съели ли мы кого-то\r\n            const otherToken = this.checkCeil(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, this.index);\r\n            if (otherToken) otherToken.destroy();\r\n\r\n            // проверка занятия 4-х углов\r\n            if (this.container[this.index].type === 'corner') {\r\n                let isWin = true;\r\n                for(let i = 0; i < 4; i++) {\r\n                    const token = this.player.tokens[i];\r\n                    if (token.container !== this.container) isWin = false;\r\n                    else if (token.container[token.index].type !== 'corner') isWin = false;\r\n                }\r\n                if (isWin) console.log('PLAYER', this.startPoint, 'WIN');\r\n            }\r\n\r\n            // проверка входа в порт\r\n            if (this.container[this.index].type === 'port') {\r\n                // если не перешли с другого порта\r\n                if (this.isFromPort === false) {\r\n                    this.isFromPort = true;\r\n                    return this.moveInPort();\r\n                } else {\r\n                // если перешли с другого порта - не выходим, что бы закончить ход\r\n                    this.isFromPort = false;\r\n                }\r\n            }\r\n\r\n            // проверка входа в туалет\r\n            if (this.container[this.index].type === 'toilet') {\r\n                this.steps = 1;\r\n\r\n                const toiletIndex = this.container[this.index].target;\r\n                const targetContainer = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toilets[toiletIndex];\r\n                this.target = {\r\n                    container: targetContainer,\r\n                    index: 0,\r\n                    x: targetContainer[0].x,\r\n                    y: targetContainer[0].y,\r\n                };\r\n\r\n                // двигаем того, кото в первой ячейки нашего туалета\r\n                const otherToken = this.target.container[0].token;\r\n                if (otherToken) {\r\n                    otherToken.isOtherTokenAction = true;\r\n                    otherToken.moveInToilet();\r\n                }\r\n\r\n                // перезаписываем обитателя текущей ячейки туалета\r\n                this.target.container[0].token = this;\r\n\r\n                console.log(\"ВОШОЛ В ТУАЛЕТ\", {...this})\r\n\r\n                this.setDirection();\r\n                const distance = this.getDistance();\r\n                this.speed = distance / this.stepDuration;\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n        new _Timer__WEBPACK_IMPORTED_MODULE_4__[\"default\"](() => this.player.diceFinished(), 1000);\r\n    }\r\n\r\n    setDirection() {\r\n        this.direction = Math.atan2(this.target.y-this.y, this.target.x-this.x);\r\n    }\r\n\r\n    getDistance() {\r\n        let dx = this.target.x - this.x; \r\n        let dy = this.target.y - this.y;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n\r\n    destroy() {\r\n        this.isOtherTokenAction = true;\r\n        this.steps = 1;\r\n        let targetIndex = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.addToReserve(this.startPoint);\r\n\r\n        this.target = {\r\n            container: this.reserve,\r\n            index: targetIndex,\r\n            x: this.reserve[targetIndex].x,\r\n            y: this.reserve[targetIndex].y,\r\n        };\r\n        \r\n        this.setDirection();\r\n        const distance = this.getDistance();\r\n        this.speed = distance / this.stepDuration;\r\n\r\n        // SOUNDS.startToken.play();\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.isAvailable) this.pointer.draw(_assets__WEBPACK_IMPORTED_MODULE_3__.SPRITES.tokenPointerGreen, {x:this.x, y:this.y}, dt);\r\n\r\n        if (this.target) {\r\n            this.stepTimeout -= dt;\r\n\r\n            if (this.stepTimeout > this.halfStepDuration) this.size += this.sizeRate * dt;\r\n            else this.size -= this.sizeRate * dt;\r\n            this.halfSize = this.size / 2;\r\n\r\n            if (this.stepTimeout > 0) this.move(dt * this.speed);\r\n            else this.stepEnd();\r\n        }\r\n\r\n        _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].context.drawImage(this.image, this.x - this.halfSize, this.y - this.halfSize, this.size, this.size);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Token);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Token.js?");

/***/ }),

/***/ "./dev_js/classes/View.js":
/*!********************************!*\
  !*** ./dev_js/classes/View.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n\r\n\r\nclass View {\r\n\r\n    static instance;\r\n\r\n    constructor() {\r\n        if (View.instance) return View.instance;\r\n\r\n        this.canvas = document.createElement('canvas');\r\n        this.width = this.canvas.width = _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ceilSize * 15 + _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].boardOffset * 2;\r\n        this.height = this.canvas.height = _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ceilSize * 15 + _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].boardOffset * 2;\r\n        this.sizeRate = 1;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.x = Math.round(this.width / 2);\r\n        this.y = Math.round(this.height / 2);\r\n        this.context = this.canvas.getContext('2d');\r\n        document.body.append(this.canvas);\r\n        this.layers = [];\r\n        \r\n        View.instance = this;\r\n\r\n        this.resize();\r\n    }\r\n\r\n    resize() {\r\n        let size = innerWidth > innerHeight ? innerHeight : innerWidth;\r\n        this.canvas.style.width = size + 'px';\r\n        this.canvas.style.height = size + 'px';\r\n\r\n        this.offsetX = Math.floor((innerWidth - size) / 2);\r\n        this.offsetY = Math.floor((innerHeight - size) / 2);\r\n        this.sizeRate = this.width / size;\r\n    }\r\n\r\n    getLayer(name) {\r\n        return this.layers.find(layer => layer.name === name);\r\n    }\r\n}\r\n\r\naddEventListener('resize', function() {\r\n    if (View.instance) View.instance.resize();\r\n});\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (View);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/View.js?");

/***/ }),

/***/ "./dev_js/constants.js":
/*!*****************************!*\
  !*** ./dev_js/constants.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst constants = {\r\n    ceilSize: 120,\r\n    boardOffset: 20,\r\n\r\n    gameStartDuration: 2500,\r\n\r\n    diceThrowDuration: 1000,\r\n    diceActiveDuration: 800,\r\n    tokenStepDuration: 500,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (constants);\n\n//# sourceURL=webpack://webpack-template/./dev_js/constants.js?");

/***/ }),

/***/ "./dev_js/loader.js":
/*!**************************!*\
  !*** ./dev_js/loader.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loader: () => (/* binding */ loader)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assets */ \"./dev_js/assets.js\");\n\r\n\r\nfunction loader(callback) {\r\n    let assetsNumber = Object.keys(_assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES).length + Object.keys(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS).length;\r\n    \r\n    for (const sprite in _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES) {\r\n        const image = new Image();\r\n        image.src = _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES_PATH + _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES[sprite];\r\n        image.onload = () => {\r\n            _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES[sprite] = image;\r\n            updateLoadingState();\r\n        }\r\n    }\r\n    \r\n    for (const sound in _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS) {\r\n        const se = new Audio( _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS_PATH + _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS[sound] );\r\n        se.oncanplaythrough = (event) => {\r\n            event.target.oncanplaythrough = null;\r\n            _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS[sound] = se;\r\n            updateLoadingState();\r\n        }\r\n    }\r\n\r\n    function updateLoadingState() {\r\n        assetsNumber--;\r\n        if (!assetsNumber) callback();\r\n    }\r\n};\n\n//# sourceURL=webpack://webpack-template/./dev_js/loader.js?");

/***/ }),

/***/ "./dev_js/main.js":
/*!************************!*\
  !*** ./dev_js/main.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   game: () => (/* binding */ game)\n/* harmony export */ });\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loader */ \"./dev_js/loader.js\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _classes_Board__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./classes/Board */ \"./dev_js/classes/Board.js\");\n/* harmony import */ var _classes_Dice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./classes/Dice */ \"./dev_js/classes/Dice.js\");\n/* harmony import */ var _classes_Layer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./classes/Layer */ \"./dev_js/classes/Layer.js\");\n/* harmony import */ var _classes_Player__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./classes/Player */ \"./dev_js/classes/Player.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./render */ \"./dev_js/render.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _classes_Timer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./classes/Timer */ \"./dev_js/classes/Timer.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n(0,_loader__WEBPACK_IMPORTED_MODULE_0__.loader)(() => game.isLoaded = true);\r\n\r\nconst game = {\r\n    isLoaded: false,\r\n    isStart: false,\r\n    players: [],\r\n    currentTurn: 0,\r\n    board: null,\r\n    dices: [],\r\n\r\n    nextTurn() {\r\n        this.currentTurn++\r\n        if (this.currentTurn === this.players.length) this.currentTurn = 0;\r\n\r\n        this.players[this.currentTurn].startTurn();\r\n    }\r\n};\r\n\r\nfunction startGame() {\r\n    const div = document.createElement('div');\r\n    div.className = 'info';\r\n    document.body.append(div);\r\n\r\n    game.isStart = true;\r\n    _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].canvas.style.opacity = 1;\r\n\r\n    game.board = new _classes_Board__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\r\n    new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('board', 0, [game.board]);\r\n\r\n    game.dices.push( new _classes_Dice__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].x - 63, _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].y - 63) );\r\n    game.dices.push( new _classes_Dice__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].x + 63, _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].y + 63) );\r\n    new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('dices', 1, game.dices);\r\n\r\n    new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('players', 2, []);\r\n    new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('tokens', 3, []);\r\n\r\n    game.players.push( new _classes_Player__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenColor, 0) );\r\n    game.players.push( new _classes_Player__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenBlack, 1) );\r\n    game.players.push( new _classes_Player__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenYellow, 2) );\r\n    game.players.push( new _classes_Player__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenRed, 3) );\r\n\r\n    game.currentTurn = Math.floor(Math.random() * game.players.length);\r\n\r\n    new _classes_Timer__WEBPACK_IMPORTED_MODULE_8__[\"default\"](() => game.nextTurn(), _constants__WEBPACK_IMPORTED_MODULE_7__[\"default\"].gameStartDuration);\r\n\r\n    _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].canvas.onclick = function(event) {\r\n        const cx = (event.clientX - _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].offsetX) * _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].sizeRate;\r\n        const cy = (event.clientY - _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].offsetY) * _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].sizeRate;\r\n\r\n        let minSize = Infinity;\r\n\r\n        game.players[game.currentTurn].tokens.forEach( token => {\r\n            if (token.isAvailable) {\r\n                const dx = cx - token.x;\r\n                const dy = cy - token.y;\r\n                const distance = Math.sqrt(dx*dx + dy*dy);\r\n                if (distance < _constants__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ceilSize / 2) token.activation();\r\n\r\n                if (distance < minSize) minSize = distance;\r\n            }\r\n        })\r\n\r\n        div.innerHTML = `\r\n            click<br>\r\n            x: ${cx.toFixed()}; y: ${cy.toFixed()}<br>\r\n            size: ${_constants__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ceilSize}; min dist: ${minSize.toFixed()}<br>\r\n            `;\r\n        new _classes_Timer__WEBPACK_IMPORTED_MODULE_8__[\"default\"](() => div.innerHTML = '', 1500);\r\n    }\r\n}\r\n\r\ndocument.body.onclick = function(event) {\r\n    /*console.log('x:', event.clientX, ' y:', event.clientY);*/\r\n    if (!game.isStart && game.isLoaded) startGame();\r\n};\n\n//# sourceURL=webpack://webpack-template/./dev_js/main.js?");

/***/ }),

/***/ "./dev_js/render.js":
/*!**************************!*\
  !*** ./dev_js/render.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _classes_View__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./classes/View */ \"./dev_js/classes/View.js\");\n\r\n\r\nconst VIEW = new _classes_View__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\r\n\r\nlet previousTime = performance.now();\r\n\r\nlet isOnFocus = true;\r\n\r\naddEventListener('blur', stopRender);\r\naddEventListener('focus', startRender);\r\n\r\nlet renderId = requestAnimationFrame(render);\r\n\r\nfunction startRender() {\r\n    cancelAnimationFrame(renderId);\r\n    isOnFocus = true;\r\n    previousTime = performance.now();\r\n    renderId = requestAnimationFrame(render);\r\n    console.log('start render');\r\n}\r\n\r\nfunction stopRender() {\r\n    isOnFocus = false;\r\n    console.log('stop render');\r\n}\r\n\r\nfunction render(time) {\r\n    const deltaTime = time - previousTime;\r\n    previousTime = time;\r\n    VIEW.context.clearRect(0, 0, VIEW.width, VIEW.height);\r\n    VIEW.layers.forEach( layer => layer.update(deltaTime) );\r\n    if (isOnFocus) renderId = requestAnimationFrame(render);\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VIEW);\n\n//# sourceURL=webpack://webpack-template/./dev_js/render.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./dev_js/main.js");
/******/ 	
/******/ })()
;
